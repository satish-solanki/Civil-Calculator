<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brick & Material Calculator</title>
  <style>
    /* ----------------------------------------------------------------
    // THEME VARIABLES AND STYLES
    // ---------------------------------------------------------------- */
    :root {
        /* Light Theme Defaults */
        --bg: #f8f9fa;
        --card: #ffffff;
        --text: #1f2937;
        --muted: #6b7280;
        --border: #e5e7eb;
        --input-bg: #f9fafb;
        --accent: #06b6d4;
        --accent-hover: #0891b2;
        --result-bg: #e0f7fa; /* Light cyan for result box */
        --result-accent: #0e7490;

        color-scheme: light; 
    }

    /* Dark Theme Overrides */
    body.dark {
        --bg: #111827;
        --card: #1f2937;
        --text: #f3f4f6;
        --muted: #9ca3af;
        --border: #4b5563;
        --input-bg: #374151;
        --result-bg: #0e7490; /* Dark cyan for result box */
        --result-accent: #e0f7fa;

        color-scheme: dark; 
    }

    /* ----------------------------------------------------------------
    // BASE STYLES AND LAYOUT
    // ---------------------------------------------------------------- */
    *{box-sizing:border-box;transition:all 0.4s ease;}
    body{font-family:'Inter',system-ui,Segoe UI,Arial,sans-serif;min-height:100vh;margin:0;background:var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center;padding:16px}
    
    .card{background:var(--card);border-radius:16px;padding:24px;max-width:960px;width:100%;box-shadow:0 10px 40px rgba(0,0,0,0.15);transition:transform 0.3s ease, box-shadow 0.3s ease;}
    .card:hover{box-shadow:0 15px 50px rgba(0,0,0,0.2);}
    
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
    h1{margin:0 0 4px;font-size:24px;display:flex;align-items:center;gap:8px;}
    .icon-title {width: 24px; height: 24px; fill: none; stroke: var(--accent); stroke-width: 2;}
    p.lead{margin:0;color:var(--muted);font-size:14px;}
    
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px 20px;}
    
    /* Input Group Styling */
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--text);font-weight:600;}
    input[type=number], select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--input-bg);color:var(--text);font-size:14px;box-shadow:inset 0 1px 3px rgba(0,0,0,0.05);-webkit-appearance: none;appearance: none;}
    input[type=number]:focus, select:focus{border-color:var(--accent);outline:none;box-shadow:0 0 0 3px rgba(6,182,212,0.3), inset 0 1px 3px rgba(0,0,0,0.05);}
    
    .row{display:flex;gap:8px}
    .small{font-size:12px;color:var(--muted);margin-top:4px;}
    
    /* Options and Openings */
    .options-group{grid-column:1 / -1;padding:16px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin:8px 0;}
    .options-group .row{flex-wrap:wrap;gap:16px;}
    .options-group label{font-weight:400;margin-bottom:0;}
    .options-group input[type="checkbox"]{margin-right:4px;}

    /* Buttons */
    .actions{display:flex;gap:12px;margin-top:20px;grid-column:1 / -1;}
    button{padding:12px 18px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer;font-weight:700;box-shadow:0 4px 15px rgba(6,182,212,0.3);text-transform:uppercase;letter-spacing:0.5px;}
    button:hover{background:var(--accent-hover);box-shadow:0 6px 20px rgba(6,182,212,0.4);transform:translateY(-1px);}
    button.secondary{background:var(--card);border:1px solid var(--border);color:var(--muted);box-shadow:none;}
    button.secondary:hover{background:var(--input-bg);color:var(--text);transform:translateY(-1px);box-shadow:0 2px 5px rgba(0,0,0,0.05);}

    /* Result Box */
    .result{margin-top:24px;padding:24px;border-radius:12px;background:var(--result-bg);color:var(--text);border:1px solid var(--accent);}
    .result .header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:8px;}
    .result .header .big{font-size:32px;font-weight:900;color:var(--result-accent);}
    
    .result h4{margin:16px 0 8px;font-size:16px;font-weight:700;color:var(--accent);}
    .result hr {border: 0; height: 1px; background: var(--border); margin: 12px 0;}
    .result strong {font-weight: 700; color: var(--text);}
    
    /* Theme Toggle Button */
    #themeToggle{width:40px;height:40px;padding:8px;border-radius:50%;background:var(--input-bg);color:var(--muted);border:1px solid var(--border);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background 0.3s, color 0.3s;}
    #themeToggle:hover{background:var(--accent);color:#fff;transform:scale(1.05);}
    .icon-toggle {width: 20px; height: 20px; fill: currentColor;}

    /* Mobile Adjustments */
    @media (max-width: 600px) {
        .card {padding: 16px; border-radius: 12px;}
        .grid {gap: 12px;}
        .actions {flex-direction: column; gap: 10px;}
        button {width: 100%;}
        .result .header .big {font-size: 28px;}
    }
  </style>
</head>
<body class="light">
  <div class="card" role="main">
    <header>
      <h1>
        <svg class="icon-title" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><polyline points="12 22 12 12"></polyline><path d="M12 12l8-5"></path><path d="M12 12l-8-5"></path></svg>
        Construction Material Calculator
      </h1>
      <button id="themeToggle" aria-label="Toggle Theme">
        <!-- Moon Icon (for initial state in light mode) -->
        <svg class="icon-toggle" id="moon-icon" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
        <!-- Sun Icon (hidden initially) -->
        <svg class="icon-toggle" id="sun-icon" style="display:none;" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
      </button>
    </header>
    
    <p class="lead">Estimate brick count and necessary materials (cement and sand) for a masonry wall. Calculations are based on volume.</p>

    <div class="grid">
      <!-- Wall Dimensions -->
      <div>
        <label>Wall length</label>
        <div class="row">
          <input id="wallLength" type="number" min="0" step="0.01" placeholder="Length" value="5" />
          <select id="wallLengthUnit"><option value="m">m</option><option value="cm">cm</option><option value="mm">mm</option></select>
        </div>
      </div>

      <div>
        <label>Wall height</label>
        <div class="row">
          <input id="wallHeight" type="number" min="0" step="0.01" placeholder="Height" value="2.5" />
          <select id="wallHeightUnit"><option value="m">m</option><option value="cm">cm</option><option value="mm">mm</option></select>
        </div>
      </div>

      <div>
        <label>Wall thickness</label>
        <div class="row">
          <input id="wallThickness" type="number" min="0" step="0.01" placeholder="Thickness" value="0.115" />
          <select id="wallThicknessUnit"><option value="m" selected>m</option><option value="cm">cm</option><option value="mm">mm</option></select>
        </div>
        <p class="small">Typical single-brick wall = 0.115 m (115 mm)</p>
      </div>

      <!-- Brick Dimensions -->
      <div>
        <label>Brick size (L √ó H √ó W)</label>
        <div class="row">
          <input id="brickLength" type="number" min="0" step="0.1" placeholder="L" value="190" />
          <input id="brickHeight" type="number" min="0" step="0.1" placeholder="H" value="90" />
          <input id="brickWidth" type="number" min="0" step="0.1" placeholder="W" value="90" />
        </div>
        <div style="margin-top:8px" class="row">
          <select id="brickUnit"><option value="mm" selected>mm</option><option value="cm">cm</option><option value="m">m</option></select>
          <input id="mortar" type="number" min="0" step="0.1" placeholder="Mortar Gap (mm)" value="10" />
          <div style="flex:1"></div>
        </div>
        <p class="small">Common brick: 190√ó90√ó90 mm, typical mortar gap is 10 mm</p>
      </div>

      <!-- Mortar Ratio -->
      <div>
        <label>Mortar Mix Ratio (Cement : Sand)</label>
        <div class="row">
          <input id="cementRatio" type="number" min="1" step="1" placeholder="Cement (e.g. 1)" value="1" />
          <input id="sandRatio" type="number" min="1" step="1" placeholder="Sand (e.g. 6)" value="6" />
        </div>
        <p class="small">Commonly 1:4, 1:5, or 1:6 mix.</p>
      </div>

      <!-- Wastage -->
      <div>
        <label>Wastage / Breakage (%)</label>
        <input id="wastage" type="number" min="0" step="0.1" placeholder="e.g. 5" value="5" />
        <p class="small">Percent to add for brick waste (default 5%)</p>
      </div>

      <!-- Openings -->
      <div id="openings">
        <label>Openings area (sum of doors/windows) in $\text{m}^2$</label>
        <input id="openingsArea" type="number" min="0" step="0.01" placeholder="e.g. 2.5" value="0" />
        <p class="small">Total area of doors, windows, etc., to subtract from the wall.</p>
      </div>
      <script>document.getElementById('openings').style.display='none';</script>

      <!-- Options -->
      <div class="options-group">
        <label>Calculation Options</label>
        <div class="row">
          <label style="display:flex;align-items:center;"><input id="includeMortar" type="checkbox" checked /> Use unit volume (brick + mortar)</label>
          <label style="display:flex;align-items:center;"><input id="subtractOpenings" type="checkbox" /> Subtract openings area</label>
        </div>
      </div>

      <!-- Actions -->
      <div class="actions">
        <button id="calc">Calculate</button>
        <button id="reset" class="secondary">Reset Inputs</button>
      </div>

      <!-- Result Box -->
      <div class="full-width result" id="resultBox" style="display:none">
        <div class="header">
          <span class="small">Estimated Bricks Required</span>
          <div class="big" id="bricksNeeded">0</div>
        </div>
        <hr>
        <div id="details"></div>
      </div>

    </div>
  </div>
  <footer>
    POWERED BY <a href="https://www.tutorialstipscivil.com" target="_blank">TUTORIALSTIPSCIVIL.COM</a>
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- THEME MANAGEMENT (Visual Change Only) ---
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const moonIcon = document.getElementById('moon-icon');
        const sunIcon = document.getElementById('sun-icon');
        
        const currentTheme = localStorage.getItem('theme') || 
                             (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

        const applyTheme = (theme) => {
            body.className = theme;
            localStorage.setItem('theme', theme);
            moonIcon.style.display = theme === 'dark' ? 'none' : 'block';
            sunIcon.style.display = theme === 'dark' ? 'block' : 'none';
        };

        const toggleTheme = () => {
            const newTheme = body.classList.contains('dark') ? 'light' : 'dark';
            applyTheme(newTheme);
        };

        applyTheme(currentTheme);
        themeToggle.addEventListener('click', toggleTheme);
        // ---------------------------------------------
        
        // --- Utility Function for Unit Conversion ---
        const unitToMeters = (value, unit) => {
            if (value === null || isNaN(value)) return 0;
            switch (unit) {
                case 'cm':
                    return value / 100;
                case 'mm':
                    return value / 1000;
                case 'm':
                default:
                    return value;
            }
        };

        // --- DOM Elements ---
        const $ = id => document.getElementById(id);

        // Wall inputs
        const wallLengthInput = $('wallLength');
        const wallHeightInput = $('wallHeight');
        const wallThicknessInput = $('wallThickness');
        const wallLengthUnit = $('wallLengthUnit');
        const wallHeightUnit = $('wallHeightUnit');
        const wallThicknessUnit = $('wallThicknessUnit');

        // Brick inputs
        const brickLengthInput = $('brickLength');
        const brickHeightInput = $('brickHeight');
        const brickWidthInput = $('brickWidth');
        const brickUnit = $('brickUnit');
        const mortarInput = $('mortar');
        const wastageInput = $('wastage');

        // Material inputs
        const cementRatioInput = $('cementRatio');
        const sandRatioInput = $('sandRatio');

        // Options
        const includeMortarCheckbox = $('includeMortar');
        const subtractOpeningsCheckbox = $('subtractOpenings');
        const openingsContainer = $('openings'); 
        const openingsAreaInput = $('openingsArea');

        // Buttons and Output
        const calculateButton = $('calc');
        const resetButton = $('reset');
        const resultBox = $('resultBox');
        const bricksNeededOutput = $('bricksNeeded');
        const detailsOutput = $('details');

        // --- Core Logic (Formulas are UNCHANGED) ---

        const updateOpeningsVisibility = () => {
            openingsContainer.style.display = subtractOpeningsCheckbox.checked ? 'block' : 'none';
            if (!subtractOpeningsCheckbox.checked) {
                openingsAreaInput.value = '0';
            }
        };

        const calculateBricks = () => {
            try {
                // 1. Get and Convert Wall Dimensions to Meters
                const wallLength = unitToMeters(parseFloat(wallLengthInput.value), wallLengthUnit.value);
                const wallHeight = unitToMeters(parseFloat(wallHeightInput.value), wallHeightUnit.value);
                const wallThickness = unitToMeters(parseFloat(wallThicknessInput.value), wallThicknessUnit.value);

                // 2. Get and Convert Brick/Mortar Dimensions to Meters
                const brickLengthRaw = unitToMeters(parseFloat(brickLengthInput.value), brickUnit.value);
                const brickHeightRaw = unitToMeters(parseFloat(brickHeightInput.value), brickUnit.value);
                const brickWidth = unitToMeters(parseFloat(brickWidthInput.value), brickUnit.value); 
                
                const mortarThickness = unitToMeters(parseFloat(mortarInput.value), 'mm');
                const wastageRate = parseFloat(wastageInput.value) / 100 || 0;

                // Input validation
                if (wallLength <= 0 || wallHeight <= 0 || wallThickness <= 0 || brickLengthRaw <= 0 || brickHeightRaw <= 0 || brickWidth <= 0) {
                    bricksNeededOutput.textContent = '0';
                    detailsOutput.innerHTML = 'Please enter valid positive dimensions for the wall and bricks.';
                    resultBox.style.display = 'block';
                    return;
                }

                // 3. Calculate Wall Area and Effective Area
                const wallArea = wallLength * wallHeight;
                let openingsArea = 0;
                let effectiveWallArea = wallArea;

                if (subtractOpeningsCheckbox.checked) {
                    openingsArea = parseFloat(openingsAreaInput.value) || 0;
                    effectiveWallArea = Math.max(0, wallArea - openingsArea);
                }
                
                // 4. Calculate Effective Wall Volume
                const effectiveWallVolume = effectiveWallArea * wallThickness;

                // 5. Calculate Volume of one Brick Unit (Brick + Mortar on all 3 dimensions: L, H, W)
                let brickUnitVolume;
                if (includeMortarCheckbox.checked) {
                    const brickLengthWithMortar = brickLengthRaw + mortarThickness;
                    const brickHeightWithMortar = brickHeightRaw + mortarThickness;
                    const brickWidthWithMortar = brickWidth + mortarThickness;
                    
                    brickUnitVolume = brickLengthWithMortar * brickHeightWithMortar * brickWidthWithMortar;
                } else {
                    brickUnitVolume = brickLengthRaw * brickHeightRaw * brickWidth;
                }

                // --- BRICK COUNT CALCULATION ---
                // 6. Total Raw Bricks Needed (Wall Volume / Brick Unit Volume)
                const totalRawBricks = effectiveWallVolume / brickUnitVolume;

                // 7. Apply Wastage (for bricks only)
                const totalBricksWithWastage = totalRawBricks * (1 + wastageRate);

                // 8. Final Result (round up to nearest whole brick)
                const finalBricks = Math.ceil(totalBricksWithWastage);


                // --- MATERIAL CALCULATION (Mortar, Cement, Sand) ---

                // Brick volume without mortar (in m¬≥)
                const brickVolumeRaw = brickLengthRaw * brickHeightRaw * brickWidth;
                
                // Total volume occupied by raw bricks in the wall
                // We use the floor/raw count here as you only need enough mortar for the *number* of bricks you calculated.
                const totalBrickVolumeRaw = Math.floor(totalRawBricks) * brickVolumeRaw;

                // Wet Mortar Volume (Total Wall Volume - Total Raw Brick Volume)
                const wetMortarVolume = effectiveWallVolume - totalBrickVolumeRaw;
                
                // Dry Mortar Volume (Applying a bulking factor for wet-to-dry, commonly 1.33)
                const DRY_MORTAR_FACTOR = 1.33; 
                const dryMortarVolume = wetMortarVolume * DRY_MORTAR_FACTOR;

                // Get Mortar Mix Ratios
                const cementRatio = parseFloat(cementRatioInput.value) || 1;
                const sandRatio = parseFloat(sandRatioInput.value) || 6;
                const totalRatio = cementRatio + sandRatio;

                // Material Quantities (Based on Dry Mortar Volume)
                const cementCUM = dryMortarVolume * (cementRatio / totalRatio);
                const sandCUM = dryMortarVolume * (sandRatio / totalRatio);

                // Constants for Cement Conversion (Standard 50kg bag)
                const CEMENT_DENSITY_KG_PER_CUM = 1440; // kg/m¬≥
                const CEMENT_VOLUME_PER_BAG = 0.0347; // m¬≥ per bag (approx. 50kg/1440 kg/m¬≥)
                
                const cementKG = cementCUM * CEMENT_DENSITY_KG_PER_CUM;
                const cementBags = cementCUM / CEMENT_VOLUME_PER_BAG;


                // --- Update Output ---
                bricksNeededOutput.textContent = finalBricks.toLocaleString('en-US');
                
                // Prepare details breakdown
                let detailsHtml = `
                    <h4><span style="color:var(--accent);">üß±</span> Brick Estimate Details</h4>
                    Wall Volume (L√óH√óT): <strong>${effectiveWallVolume.toFixed(3)} m¬≥</strong>.
                    Brick Unit Volume (w/ ${includeMortarCheckbox.checked ? `${(mortarThickness*1000).toFixed(0)}mm Mortar` : 'No Mortar'}): <strong>${brickUnitVolume.toFixed(5)} m¬≥</strong>.
                    ${subtractOpeningsCheckbox.checked ? `Area after openings (${openingsArea.toFixed(2)} m¬≤) subtraction: <strong>${effectiveWallArea.toFixed(2)} m¬≤</strong>. <br>` : ''}
                    Raw Bricks Needed: <strong>${totalRawBricks.toFixed(0).toLocaleString('en-US')}</strong>.
                    Wastage (${(wastageRate * 100).toFixed(1)}%): <strong>${(finalBricks - totalRawBricks).toFixed(0).toLocaleString('en-US')} bricks</strong>.
                    
                    <hr>
                    
                    <h4><span style="color:var(--accent);">üèóÔ∏è</span> Mortar & Material Estimates (${cementRatio}:${sandRatio} mix)</h4>
                    Wet Mortar Volume: <strong>${wetMortarVolume.toFixed(4)} m¬≥</strong>.
                    Dry Mortar Volume (w/ 1.33 Bulking Factor): <strong>${dryMortarVolume.toFixed(4)} m¬≥</strong>.
                    
                    <br>
                    
                    <p class="small">
                      <span style="font-size:14px; font-weight:600; color:var(--text);">Cement Required:</span><br>
                      CUM: <strong>${cementCUM.toFixed(4)} m¬≥</strong><br>
                      Bags (50kg): <strong>${cementBags.toFixed(2)} bags</strong><br>
                      Weight: <strong>${cementKG.toFixed(2)} kg</strong>
                    </p>
                    
                    <p class="small" style="margin-top:8px;">
                      <span style="font-size:14px; font-weight:600; color:var(--text);">Sand Required:</span><br>
                      CUM: <strong>${sandCUM.toFixed(4)} m¬≥</strong>
                    </p>
                `;

                detailsOutput.innerHTML = detailsHtml;
                resultBox.style.display = 'block';

            } catch (error) {
                console.error("Calculation error:", error);
                bricksNeededOutput.textContent = 'Error';
                detailsOutput.innerHTML = 'An error occurred during calculation. Check input values.';
                resultBox.style.display = 'block';
            }
        };

        const resetForm = () => {
            // Reset all number inputs to their default values 
            wallLengthInput.value = "5";
            wallHeightInput.value = "2.5";
            wallThicknessInput.value = "0.115";
            brickLengthInput.value = "190";
            brickHeightInput.value = "90";
            brickWidthInput.value = "90";
            mortarInput.value = "10";
            wastageInput.value = "5";
            openingsAreaInput.value = "0";

            // Reset new material inputs
            cementRatioInput.value = "1";
            sandRatioInput.value = "6";

            // Reset selectors and checkboxes to default
            wallLengthUnit.value = "m";
            wallHeightUnit.value = "m";
            wallThicknessUnit.value = "m";
            brickUnit.value = "mm";
            includeMortarCheckbox.checked = true;
            subtractOpeningsCheckbox.checked = false;

            // Hide the result and openings container
            resultBox.style.display = 'none';
            updateOpeningsVisibility();
        };

        // --- Event Listeners ---
        subtractOpeningsCheckbox.addEventListener('change', updateOpeningsVisibility);
        calculateButton.addEventListener('click', calculateBricks);
        resetButton.addEventListener('click', resetForm);

        // Initial setup on load 
        updateOpeningsVisibility();
    });
  </script>
</body>
</html>
